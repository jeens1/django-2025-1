{% extends 'blog/base.html' %}
{% block main-area %}
    <!-- Post content-->
    <article>
        <!-- Post header-->
        <header class="mb-4">
            <!-- Post title-->
            <h1 class="fw-bolder mb-1"> {{ post.title }}</h1>
            <!-- Post meta content-->
            <div class="text-muted fst-italic mb-2">Posted on {{ post.created_date}} by {{ post.author }}</div>

            <!-- Post categories-->
            <!-- 카테고리는 있기도 하고, 없기도 한다. -->
            {%  if post.category %}
                <a class="badge bg-secondary text-decoration-none link-light" href="#!">
                    {{ post.category.name }}
                </a>
            {% else %}
                <a class="badge bg-secondary text-decoration-none link-light" href="#!">
                   미분류
                </a>
            {% endif %}
            <a class="btn btn-primary " href="/blog/{{ post.pk }}/delete/">
                글지우기
            </a>
            <a class="btn btn-success "
               href="/blog/{{ post.pk }}/update/">
                글수정하기
            </a>
        </header>
        <!-- Preview image figure-->
        <figure class="mb-4">
            {% if post.uploaded_image %}
                <img class="img-fluid rounded"
                 src={{ post.uploaded_image.url }} alt="..." />
            {% else %}
                <img class="img-fluid rounded"
                 src="https://dummyimage.com/850x350/dee2e6/6c757d.jpg" alt="..." />
            {% endif %}
        </figure>
        <!-- Post content-->
        <section class="mb-5">
             <p class="fs-5 mb-4"> {{ post.content}}</p>
        </section>
        {% if post.uploaded_file %}
            <a href={{ post.uploaded_file.url }}><h3>Download</h3></a>
        {% endif %}
    </article>

    <!-- Comments section-->
    <section class="mb-5">
        <div class="card bg-light">
            <div class="card-body">
                <!-- Comment form-->
                <form method="post" action="/blog/{{ post.pk }}/createcomment/" class="mb-4">
                    {% csrf_token %}
                    {{ commentform }}
                    <input type="submit">
                </form>
                {% for comments in comments %}
                <!-- Comment with nested comments-->
                <div class="d-flex mb-4">
                    <!-- Parent comment-->
                    <div class="flex-shrink-0"><img class="rounded-circle" src="https://dummyimage.com/50x50/ced4da/6c757d.jpg" alt="..." /></div>
                    <div class="ms-3">
                        <div class="fw-bold">{{ comment.author }}
                        </div>
                        {{ comment.content }}

                        <a class="btn btn-primary">댓글수정</a>
                        <a class="btn btn-success">댓글삭제</a>


                    </div>
                </div>
                {% endfor %}

            </div>
        </div>

    </section>
{% endblock %}


{% block header %}
    <h1 class="fw-bolder">Detail Page</h1>
    <p class="lead mb-0">Detail Page</p>
{% endblock %}